<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ä½ å¥½ä¸–ç•Œ</title>
    <url>/Hello-World_20230604/</url>
    <content><![CDATA[<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo &quot;Hello World!&quot;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>Ajax</title>
    <url>/Ajax-summary_20230908/</url>
    <content><![CDATA[<p>ğŸ•Š</p>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p>1.å¼•å…¥axios.js: <span class="exturl" data-url="aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9heGlvcy9kaXN0L2F4aW9zLm1pbi5qcw==">https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js<i class="fa fa-external-link-alt"></i></span></p>
<p>2.ä½¿ç”¨ axios å‡½æ•°</p>
<p><strong>å¸¸ç”¨è¯·æ±‚æ–¹æ³•:</strong></p>
<table>
<thead>
<tr>
<th>è¯·æ±‚æ–¹æ³•</th>
<th>æ“ä½œ</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td>è·å–æ•°æ®</td>
</tr>
<tr>
<td>POST</td>
<td>æ•°æ®æäº¤</td>
</tr>
<tr>
<td>PUT</td>
<td>ä¿®æ”¹æ•°æ®(å…¨éƒ¨)</td>
</tr>
<tr>
<td>DELETE</td>
<td>åˆ é™¤æ•°æ®</td>
</tr>
<tr>
<td>PATCH</td>
<td>ä¿®æ”¹æ•°æ®(éƒ¨åˆ†)</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">url: &#x27;ç›®æ ‡èµ„æºåœ°å€&#x27;,</span><br><span class="line">method: &#x27;è¯·æ±‚æ–¹æ³•&#x27;,</span><br><span class="line">data: &#123;</span><br><span class="line">å‚æ•°å:å€¼</span><br><span class="line">&#125;</span><br><span class="line">&#125;).then((result) =&gt; &#123;</span><br><span class="line">// å¯¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®åšåç»­å¤„ç†</span><br><span class="line">&#125;).catch(error =&gt; &#123;</span><br><span class="line">// å¤„ç†é”™è¯¯</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img data-src="https://a.flyks.live/Ajax-summary_20230908/axios.jpg" alt="axios" title="axios"></p>
<p>axios æ˜¯å¯¹ XHR ç›¸å…³ä»£ç è¿›è¡Œäº†å°è£…ï¼Œè®©æˆ‘ä»¬åªå…³å¿ƒä¼ é€’çš„æ¥å£å‚æ•°</p>
<h3 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. åˆ›å»º XMLHttpRequest å¯¹è±¡</span><br><span class="line">const xhr = new XMLHttpRequest()</span><br><span class="line">// 2. é…ç½®è¯·æ±‚æ–¹æ³•å’Œè¯·æ±‚ url åœ°å€</span><br><span class="line">xhr.open(&#x27;è¯·æ±‚æ–¹æ³•&#x27;, &#x27;è¯·æ±‚urlç½‘å€&#x27;)</span><br><span class="line">// 3. ç›‘å¬ loadend äº‹ä»¶ï¼Œæ¥æ”¶å“åº”ç»“æœ</span><br><span class="line">xhr.addEventListener(&#x27;loadend&#x27;, () =&gt; &#123;</span><br><span class="line">  // å“åº”ç»“æœ,å¤„ç†æ•°æ®</span><br><span class="line">  console.log(xhr.response)</span><br><span class="line">&#125;)</span><br><span class="line">// è®¾ç½®è¯·æ±‚å¤´-å‘Šè¯‰æœåŠ¡å™¨å†…å®¹ç±»å‹ï¼ˆJSONå­—ç¬¦ä¸²ï¼‰</span><br><span class="line">xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/json&#x27;)</span><br><span class="line">// å‡†å¤‡æäº¤çš„æ•°æ®</span><br><span class="line">const userObj = &#123;</span><br><span class="line">    å‚æ•°å1: å€¼1,</span><br><span class="line">    å‚æ•°å2: å€¼2</span><br><span class="line">  &#125;</span><br><span class="line">  const userStr = JSON.stringify(userObj)</span><br><span class="line">// 4. å‘èµ·è¯·æ±‚</span><br><span class="line">xhr.send(userStr)</span><br></pre></td></tr></table></figure>

<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. åˆ›å»ºPromiseå¯¹è±¡</span><br><span class="line">const p = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    // 2. æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡-å¹¶ä¼ é€’ç»“æœ</span><br><span class="line">    // æˆåŠŸè°ƒç”¨ï¼šresolve(å€¼) è§¦å‘ then() æ‰§è¡Œ</span><br><span class="line">    // å¤±è´¥è°ƒç”¨ï¼šreject(å€¼) è§¦å‘ catch() æ‰§è¡Œ</span><br><span class="line">&#125;)</span><br><span class="line">// 3. æ¥æ”¶ç»“æœ</span><br><span class="line">p.then(result =&gt; &#123;</span><br><span class="line">    // æˆåŠŸ</span><br><span class="line">&#125;).catch(error)=&gt;&#123;</span><br><span class="line">    //å¤±è´¥</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Promise-XHR"><a href="#Promise-XHR" class="headerlink" title="Promise+XHR"></a>Promise+XHR</h3><table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>1xx</td>
<td>ä¿¡æ¯</td>
</tr>
<tr>
<td>2xx</td>
<td>æˆåŠŸ</td>
</tr>
<tr>
<td>3xx</td>
<td>é‡å®šå‘æ¶ˆæ¯</td>
</tr>
<tr>
<td>4xx</td>
<td>å®¢æˆ·ç«¯é”™è¯¯</td>
</tr>
<tr>
<td>5xx</td>
<td>æœåŠ¡ç«¯é”™è¯¯</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. åˆ›å»ºPromiseå¯¹è±¡</span><br><span class="line">const p = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  // 2. æ‰§è¡ŒXHRå¼‚æ­¥ä»£ç ï¼Œè·å–çœä»½åˆ—è¡¨</span><br><span class="line">  const xhr = new XMLHttpRequest()</span><br><span class="line">  xhr.open(&#x27;GET&#x27;, &#x27;url&#x27;)</span><br><span class="line">  xhr.addEventListener(&#x27;loadend&#x27;, () =&gt; &#123;</span><br><span class="line">    // xhrå¦‚ä½•åˆ¤æ–­å“åº”æˆåŠŸè¿˜æ˜¯å¤±è´¥çš„ï¼Ÿ</span><br><span class="line">    // 2xxå¼€å¤´çš„éƒ½æ˜¯æˆåŠŸå“åº”çŠ¶æ€ç </span><br><span class="line">    if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;</span><br><span class="line">      resolve(JSON.parse(xhr.response))</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      reject(new Error(xhr.response))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  xhr.send()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 3. å…³è”æˆåŠŸæˆ–å¤±è´¥å‡½æ•°ï¼Œåšåç»­å¤„ç†</span><br><span class="line">p.then(result =&gt; &#123;</span><br><span class="line">  console.log(result)</span><br><span class="line">&#125;).catch(error =&gt; &#123;</span><br><span class="line">  // é”™è¯¯å¯¹è±¡è¦ç”¨console.dirè¯¦ç»†æ‰“å°</span><br><span class="line">  console.dir(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="å°è£…çš„axioså‡½æ•°"><a href="#å°è£…çš„axioså‡½æ•°" class="headerlink" title="å°è£…çš„axioså‡½æ•°"></a>å°è£…çš„axioså‡½æ•°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function myAxios(config) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    const xhr = new XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    if (config.params) &#123;</span><br><span class="line">      const paramsObj = new URLSearchParams(config.params)</span><br><span class="line">      const queryString = paramsObj.toString()</span><br><span class="line">      config.url += `?$&#123;queryString&#125;`</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.open(config.method || &#x27;GET&#x27;, config.url)</span><br><span class="line"></span><br><span class="line">    xhr.addEventListener(&#x27;loadend&#x27;, () =&gt; &#123;</span><br><span class="line">      if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;</span><br><span class="line">        resolve(JSON.parse(xhr.response))</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        reject(new Error(xhr.response))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    // 1. åˆ¤æ–­æœ‰dataé€‰é¡¹ï¼Œæºå¸¦è¯·æ±‚ä½“</span><br><span class="line">    if (config.data) &#123;</span><br><span class="line">      // 2. è½¬æ¢æ•°æ®ç±»å‹ï¼Œåœ¨sendä¸­å‘é€</span><br><span class="line">      const jsonStr = JSON.stringify(config.data)</span><br><span class="line">      xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/json&#x27;)</span><br><span class="line">      xhr.send(jsonStr)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // å¦‚æœæ²¡æœ‰è¯·æ±‚ä½“æ•°æ®ï¼Œæ­£å¸¸çš„å‘èµ·è¯·æ±‚</span><br><span class="line">      xhr.send()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Promiseè§£å†³å›è°ƒåœ°ç‹±"><a href="#Promiseè§£å†³å›è°ƒåœ°ç‹±" class="headerlink" title="Promiseè§£å†³å›è°ƒåœ°ç‹±"></a>Promiseè§£å†³å›è°ƒåœ°ç‹±</h3><p>JS ä¸­çš„å¼‚æ­¥ä»£ç :setTimeout / setIntervalã€äº‹ä»¶ã€Ajaxï¼›å¼‚æ­¥ä»£ç ä¾é å›è°ƒå‡½æ•°æ¥æ¥æ”¶ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­åµŒå¥—å›è°ƒå‡½æ•°ï¼Œä¸€ç›´åµŒå¥—ä¸‹å»å°±å½¢æˆäº†å›è°ƒå‡½æ•°åœ°ç‹±ã€‚</p>
<p>Promise then() æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°ç”Ÿæˆçš„ Promise å¯¹è±¡ç‰¹æ€§ï¼Œç»§ç»­ä¸²è”ä¸‹ä¸€ç¯ä»»åŠ¡,then() å›è°ƒå‡½æ•°ä¸­çš„è¿”å›å€¼ï¼Œä¼šå½±å“æ–°ç”Ÿæˆçš„ Promise å¯¹è±¡æœ€ç»ˆçŠ¶æ€å’Œç»“æœï¼Œå¯ä»¥è§£å†³å›è°ƒå‡½æ•°åµŒå¥—é—®é¢˜ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. å¾—åˆ°-è·å–çœä»½Promiseå¯¹è±¡</span><br><span class="line">axios(&#123;url: &#x27;http://hmajax.itheima.net/api/province&#x27;&#125;).then(result =&gt; &#123;</span><br><span class="line">  //å¤„ç†çœä»½æ•°æ®</span><br><span class="line">  pname = result.data.list[0]</span><br><span class="line">  // 2. å¾—åˆ°-è·å–åŸå¸‚Promiseå¯¹è±¡</span><br><span class="line">  return axios(&#123;url: &#x27;http://hmajax.itheima.net/api/city&#x27;, params:&#123;pname&#125;&#125;)</span><br><span class="line">&#125;).then(result =&gt; &#123;</span><br><span class="line">  //å¤„ç†åŸå¸‚æ•°æ®</span><br><span class="line">  const cname = result.data.list[0]</span><br><span class="line">  // 3. å¾—åˆ°-è·å–åœ°åŒºPromiseå¯¹è±¡</span><br><span class="line">  return axios(&#123;url: &#x27;http://hmajax.itheima.net/api/area&#x27;, params:&#123;pname,cname&#125;&#125;)</span><br><span class="line">&#125;).then(result =&gt; &#123;</span><br><span class="line">  //å¤„ç†åœ°åŒºæ•°æ®</span><br><span class="line">  console.log(result)</span><br><span class="line">  const areaName = result.data.list[0]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="async-å’Œ-await"><a href="#async-å’Œ-await" class="headerlink" title="async å’Œ await"></a>async å’Œ await</h3><p>åœ¨ async å‡½æ•°å†…ï¼Œä½¿ç”¨ await å…³é”®å­—å–ä»£ then å‡½æ•°ï¼Œç­‰å¾…è·å– Promise å¯¹è±¡æˆåŠŸçŠ¶æ€çš„ç»“æœå€¼ã€‚</p>
<p>ä¸Šè¿°ä¾‹å­å¯æ”¹ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. å®šä¹‰asyncä¿®é¥°å‡½æ•°</span><br><span class="line">async function getData() &#123;</span><br><span class="line">  // 2. awaitç­‰å¾…Promiseå¯¹è±¡æˆåŠŸçš„ç»“æœ</span><br><span class="line">  const pObj = await axios(&#123;url: &#x27;http://hmajax.itheima.net/api/province&#x27;&#125;)</span><br><span class="line">  const pname = pObj.data.list[0]</span><br><span class="line">  const cObj = await axios(&#123;url: &#x27;http://hmajax.itheima.net/api/city&#x27;, params:&#123;pname&#125;&#125;)</span><br><span class="line">  const cname = cObj.data.list[0]</span><br><span class="line">  const aObj = await axios(&#123;url: &#x27;http://hmajax.itheima.net/api/area&#x27;, params:&#123;pname,cname&#125;&#125;)</span><br><span class="line">  const areaName = aObj.data.list[0]</span><br><span class="line">&#125;</span><br><span class="line">getData()</span><br></pre></td></tr></table></figure>

<h3 id="äº‹ä»¶å¾ªç¯EventLoop"><a href="#äº‹ä»¶å¾ªç¯EventLoop" class="headerlink" title="äº‹ä»¶å¾ªç¯EventLoop"></a>äº‹ä»¶å¾ªç¯EventLoop</h3><p>æ‰§è¡Œä»£ç å’Œæ”¶é›†å¼‚æ­¥ä»»åŠ¡çš„æ¨¡å‹ï¼Œåœ¨è°ƒç”¨æ ˆç©ºé—²ï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œå›è°ƒå‡½æ•°çš„æ‰§è¡Œæœºåˆ¶ï¼Œå°±å«äº‹ä»¶å¾ªç¯ã€‚</p>
<p>(1)ï¼šæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œé‡åˆ°å¼‚æ­¥ä»£ç äº¤ç»™å®¿ä¸»æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œ</p>
<p>(2)ï¼šå¼‚æ­¥æœ‰äº†ç»“æœåï¼ŒæŠŠå›è°ƒå‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—æ’é˜Ÿ</p>
<p>(3)ï¼šå½“è°ƒç”¨æ ˆç©ºé—²åï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„å›è°ƒå‡½æ•°</p>
<p><strong>ES6 ä¹‹åå¼‚æ­¥ä»»åŠ¡åˆ†ä¸ºï¼š</strong></p>
<p>å®ä»»åŠ¡ï¼šç”±æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç ï¼ˆJSè„šæœ¬æ‰§è¡Œäº‹ä»¶ï¼ˆscriptï¼‰/setTimeout/setInterval/AJAXè¯·æ±‚å®Œæˆäº‹ä»¶/ç”¨æˆ·äº¤äº’äº‹ä»¶ç­‰ ï¼‰</p>
<p>å¾®ä»»åŠ¡ï¼šç”± JS å¼•æ“ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç ï¼ˆPromise æœ¬èº«æ˜¯åŒæ­¥çš„ï¼Œè€Œthenå’Œcatchå›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œå±äºå¾®ä»»åŠ¡ï¼‰</p>
<p>åŒæ­¥ä»»åŠ¡æ‰§è¡Œåæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºåï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</p>
<p><img data-src="https://a.flyks.live/Ajax-summary_20230908/order1.jpg" alt="äº‹ä»¶å¾ªç¯ä¾‹å­" title="äº‹ä»¶å¾ªç¯"></p>
<p><img data-src="https://a.flyks.live/Ajax-summary_20230908/order.jpg" alt="äº‹ä»¶å¾ªç¯ä¾‹å­" title="äº‹ä»¶å¾ªç¯"></p>
<h3 id="Promise-all-é™æ€æ–¹æ³•"><a href="#Promise-all-é™æ€æ–¹æ³•" class="headerlink" title="Promise.all é™æ€æ–¹æ³•"></a>Promise.all é™æ€æ–¹æ³•</h3><p>åˆå¹¶å¤šä¸ª Promise å¯¹è±¡ï¼Œç­‰å¾…æ‰€æœ‰åŒæ—¶æˆåŠŸå®Œæˆï¼ˆæˆ–æŸä¸€ä¸ªå¤±è´¥ï¼‰ï¼Œåšåç»­é€»è¾‘ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const p = Promise.all([Promiseå¯¹è±¡, Promiseå¯¹è±¡, ...])</span><br><span class="line">p.then(result =&gt; &#123;</span><br><span class="line">  // result ç»“æœ: [Promiseå¯¹è±¡æˆåŠŸç»“æœ, Promiseå¯¹è±¡æˆåŠŸç»“æœ, ...]</span><br><span class="line">&#125;).catch(error =&gt; &#123;</span><br><span class="line">  // ç¬¬ä¸€ä¸ªå¤±è´¥çš„ Promise å¯¹è±¡ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Knowledge summary</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.js-Webpack</title>
    <url>/Node.js-Webpack-summary_20230910/</url>
    <content><![CDATA[<p>ğŸ•Š</p>
<h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><p>Node.js æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œèƒ½ç‹¬ç«‹æ‰§è¡Œ JS ä»£ç ,Node.js æ‰§è¡Œç›®æ ‡ JS æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ node xxx.js å‘½ä»¤æ¥æ‰§è¡Œã€‚</p>
<h3 id="fsæ¨¡å—-è¯»å†™æ–‡ä»¶"><a href="#fsæ¨¡å—-è¯»å†™æ–‡ä»¶" class="headerlink" title="fsæ¨¡å—-è¯»å†™æ–‡ä»¶"></a>fsæ¨¡å—-è¯»å†™æ–‡ä»¶</h3><p>ä½¿ç”¨è¯­æ³•:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//åŠ è½½ fs æ¨¡å—ï¼Œå¾—åˆ° fs å¯¹è±¡</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">//å†™å…¥æ–‡ä»¶å†…å®¹è¯­æ³•</span><br><span class="line">fs.writeFile(&#x27;æ–‡ä»¶è·¯å¾„&#x27;, &#x27;å†™å…¥å†…å®¹&#x27;, err =&gt; &#123;</span><br><span class="line">  // å†™å…¥åçš„å›è°ƒå‡½æ•°</span><br><span class="line">&#125;)</span><br><span class="line">//è¯»å–æ–‡ä»¶å†…å®¹çš„è¯­æ³•</span><br><span class="line">fs.readFile(&#x27;æ–‡ä»¶è·¯å¾„&#x27;, (err, data) =&gt; &#123;</span><br><span class="line">  // è¯»å–åçš„å›è°ƒå‡½æ•°</span><br><span class="line">  // data æ˜¯æ–‡ä»¶å†…å®¹çš„ Buffer æ•°æ®æµ</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="pathæ¨¡å—-è·¯å¾„å¤„ç†-dirname"><a href="#pathæ¨¡å—-è·¯å¾„å¤„ç†-dirname" class="headerlink" title="pathæ¨¡å—-è·¯å¾„å¤„ç† __dirname"></a>pathæ¨¡å—-è·¯å¾„å¤„ç† __dirname</h3><p>åŠ¨æ€è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">console.log(__dirname) // ä»ç›˜ç¬¦å¼€å§‹çš„</span><br><span class="line"></span><br><span class="line">// 1. åŠ è½½ path æ¨¡å—</span><br><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">// 2. ä½¿ç”¨ path.join() æ¥æ‹¼æ¥è·¯å¾„</span><br><span class="line">const pathStr = path.join(__dirname, &#x27;..&#x27;, &#x27;text.txt&#x27;)</span><br><span class="line">console.log(pathStr)</span><br><span class="line"></span><br><span class="line">fs.readFile(pathStr, (err, data) =&gt; &#123;</span><br><span class="line">  if (err) console.log(err)</span><br><span class="line">  else console.log(data.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="httpæ¨¡å—-åˆ›å»ºWebæœåŠ¡"><a href="#httpæ¨¡å—-åˆ›å»ºWebæœåŠ¡" class="headerlink" title="httpæ¨¡å—-åˆ›å»ºWebæœåŠ¡"></a>httpæ¨¡å—-åˆ›å»ºWebæœåŠ¡</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1.1 åŠ è½½ http æ¨¡å—ï¼Œåˆ›å»º Web æœåŠ¡å¯¹è±¡</span><br><span class="line">const http = require(&#x27;http&#x27;)</span><br><span class="line">const server = http.createServer()</span><br><span class="line">// 1.2 ç›‘å¬ request è¯·æ±‚äº‹ä»¶ï¼Œè®¾ç½®å“åº”å¤´å’Œå“åº”ä½“</span><br><span class="line">server.on(&#x27;request&#x27;, (req, res) =&gt; &#123;</span><br><span class="line">  // è®¾ç½®å“åº”å¤´-å†…å®¹ç±»å‹-æ™®é€šæ–‡æœ¬ä»¥åŠä¸­æ–‡ç¼–ç æ ¼å¼</span><br><span class="line">  res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain;charset=utf-8&#x27;)</span><br><span class="line">  // è®¾ç½®å“åº”ä½“å†…å®¹ï¼Œç»“æŸæœ¬æ¬¡è¯·æ±‚ä¸å“åº”</span><br><span class="line">  res.end(&#x27;æ¬¢è¿ä½¿ç”¨ Node.js å’Œ http æ¨¡å—åˆ›å»ºçš„ Web æœåŠ¡&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">// 1.3 é…ç½®ç«¯å£å·å¹¶å¯åŠ¨ Web æœåŠ¡</span><br><span class="line">server.listen(3000, () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;Web æœåŠ¡å¯åŠ¨æˆåŠŸäº†&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="CommonJS-æ ‡å‡†è¯­æ³•å¯¼å‡ºå’Œå¯¼å…¥"><a href="#CommonJS-æ ‡å‡†è¯­æ³•å¯¼å‡ºå’Œå¯¼å…¥" class="headerlink" title="CommonJS æ ‡å‡†è¯­æ³•å¯¼å‡ºå’Œå¯¼å…¥"></a>CommonJS æ ‡å‡†è¯­æ³•å¯¼å‡ºå’Œå¯¼å…¥</h3><p>å¯¼å‡ºè¯­æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  å¯¹å¤–å±æ€§å: æ¨¡å—å†…ç§æœ‰å˜é‡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¼å…¥è¯­æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const å˜é‡å = require(&#x27;æ¨¡å—åæˆ–è·¯å¾„&#x27;)</span><br><span class="line">// Node.js ç¯å¢ƒå†…ç½®æ¨¡å—ç›´æ¥å†™æ¨¡å—åï¼ˆä¾‹å¦‚ï¼šfsï¼Œpathï¼Œhttpï¼‰</span><br><span class="line">// è‡ªå®šä¹‰æ¨¡å—ï¼šå†™æ¨¡å—æ–‡ä»¶è·¯å¾„ï¼ˆä¾‹å¦‚ï¼š./utils.js)</span><br></pre></td></tr></table></figure>

<h3 id="ECMAScriptæ ‡å‡†-é»˜è®¤å¯¼å‡ºå’Œå¯¼å…¥"><a href="#ECMAScriptæ ‡å‡†-é»˜è®¤å¯¼å‡ºå’Œå¯¼å…¥" class="headerlink" title="ECMAScriptæ ‡å‡†-é»˜è®¤å¯¼å‡ºå’Œå¯¼å…¥"></a>ECMAScriptæ ‡å‡†-é»˜è®¤å¯¼å‡ºå’Œå¯¼å…¥</h3><p>Node.js é»˜è®¤åªæ”¯æŒ CommonJS æ ‡å‡†è¯­æ³•ï¼Œå¦‚æœæƒ³è¦åœ¨å½“å‰é¡¹ç›®ç¯å¢ƒä¸‹ä½¿ç”¨ ECMAScript æ ‡å‡†è¯­æ³•ï¼Œè¯·æ–°å»º package.json æ–‡ä»¶è®¾ç½® {â€œtypeâ€: â€˜moduleâ€™}</p>
<p>å¯¼å‡ºè¯­æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  å¯¹å¤–å±æ€§å: æ¨¡å—å†…ç§æœ‰å˜é‡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¼å…¥è¯­æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import å˜é‡å from &#x27;æ¨¡å—åæˆ–è·¯å¾„&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="npmè½¯ä»¶åŒ…ç®¡ç†å™¨"><a href="#npmè½¯ä»¶åŒ…ç®¡ç†å™¨" class="headerlink" title="npmè½¯ä»¶åŒ…ç®¡ç†å™¨"></a>npmè½¯ä»¶åŒ…ç®¡ç†å™¨</h3><p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<p>1.åˆå§‹åŒ–æ¸…å•æ–‡ä»¶ï¼š npm init -y ï¼ˆå¾—åˆ° package.json æ–‡ä»¶ï¼Œæœ‰åˆ™è·³è¿‡æ­¤å‘½ä»¤ï¼‰</p>
<p>æ³¨æ„ -y å°±æ˜¯æ‰€æœ‰é€‰é¡¹ç”¨é»˜è®¤å€¼ï¼Œæ‰€åœ¨æ–‡ä»¶å¤¹ä¸è¦æœ‰ä¸­æ–‡/ç‰¹æ®Šç¬¦å·ï¼Œå»ºè®®è‹±æ–‡å’Œæ•°å­—ç»„æˆï¼Œå› ä¸º npm åŒ…åé™åˆ¶å»ºè®®ç”¨è‹±æ–‡å’Œæ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ä¸­åˆ’çº¿</p>
<p>2.ä¸‹è½½è½¯ä»¶åŒ…ï¼šnpm i è½¯ä»¶åŒ…åç§°</p>
<p>æ‹¿åˆ°äº†ä¸€ä¸ªåˆ«äººç¼–å†™çš„é¡¹ç›®,åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œè¿è¡Œç»ˆç«¯å‘½ä»¤ï¼šnpm i å³å¯å®‰è£… package.json é‡Œè®°å½•çš„æ‰€æœ‰åŒ…å’Œå¯¹åº”ç‰ˆæœ¬åˆ°æœ¬é¡¹ç›®ä¸­çš„ node_modules</p>
<p>3.ä½¿ç”¨è½¯ä»¶åŒ…</p>
<h2 id="Webpackæ¨¡å—æ‰“åŒ…å·¥å…·"><a href="#Webpackæ¨¡å—æ‰“åŒ…å·¥å…·" class="headerlink" title="Webpackæ¨¡å—æ‰“åŒ…å·¥å…·"></a>Webpackæ¨¡å—æ‰“åŒ…å·¥å…·</h2><p>ä¸‹è½½ webpack webpack-cli åˆ°é¡¹ç›®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure>

<p>package.json é…ç½®å±€éƒ¨è‡ªå®šä¹‰å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;:&#123;</span><br><span class="line">    &quot;build&quot;:&quot;webpack&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹-Webpack-æ‰“åŒ…å…¥å£å’Œå‡ºå£"><a href="#ä¿®æ”¹-Webpack-æ‰“åŒ…å…¥å£å’Œå‡ºå£" class="headerlink" title="ä¿®æ”¹ Webpack æ‰“åŒ…å…¥å£å’Œå‡ºå£"></a>ä¿®æ”¹ Webpack æ‰“åŒ…å…¥å£å’Œå‡ºå£</h3><p>1.é¡¹ç›®æ ¹ç›®å½•ï¼Œæ–°å»º Webpack.config.js é…ç½®æ–‡ä»¶</p>
<p>2.å¯¼å‡ºé…ç½®å¯¹è±¡ï¼Œé…ç½®å…¥å£ï¼Œå‡ºå£æ–‡ä»¶è·¯å¾„ï¼ˆåˆ«å¿˜äº†ä¿®æ”¹ç£ç›˜æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„åå­—ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: path.resolve(__dirname, &#x27;src/login/index.js&#x27;),</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span><br><span class="line">    filename: &#x27;./login/index.js&#x27;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-è‡ªåŠ¨ç”Ÿæˆ-html-æ–‡ä»¶"><a href="#Webpack-è‡ªåŠ¨ç”Ÿæˆ-html-æ–‡ä»¶" class="headerlink" title="Webpack è‡ªåŠ¨ç”Ÿæˆ html æ–‡ä»¶"></a>Webpack è‡ªåŠ¨ç”Ÿæˆ html æ–‡ä»¶</h3><p>HtmlWebpackPlugin<br>ä¸‹è½½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i html-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<p>é…ç½® webpack.config.js è®© Webpack æ‹¥æœ‰æ’ä»¶åŠŸèƒ½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: &#x27;./public/login.html&#x27;, // æ¨¡æ¿æ–‡ä»¶</span><br><span class="line">      filename: &#x27;./login/index.html&#x27; // è¾“å‡ºæ–‡ä»¶</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-æ‰“åŒ…-css-ä»£ç "><a href="#Webpack-æ‰“åŒ…-css-ä»£ç " class="headerlink" title="Webpack-æ‰“åŒ… css ä»£ç "></a>Webpack-æ‰“åŒ… css ä»£ç </h3><p>Webpack é»˜è®¤åªè¯†åˆ« JS å’Œ JSON æ–‡ä»¶å†…å®¹ï¼Œæ‰€ä»¥æƒ³è¦è®© Webpack è¯†åˆ«æ›´å¤šä¸åŒå†…å®¹ï¼Œéœ€è¦ä½¿ç”¨åŠ è½½å™¨æ¥è¾…åŠ© Webpack æ‰èƒ½æ‰“åŒ… css ä»£ç </p>
<p>åŠ è½½å™¨ css-loaderï¼šè§£æ css ä»£ç </p>
<p>åŠ è½½å™¨ style-loaderï¼šæŠŠè§£æåçš„ css ä»£ç æ’å…¥åˆ° DOMï¼ˆstyle æ ‡ç­¾ä¹‹é—´ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i css-loader style-loader --save-dev</span><br></pre></td></tr></table></figure>
<p>Webpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  module: &#123; // åŠ è½½å™¨</span><br><span class="line">    rules: [ // è§„åˆ™åˆ—è¡¨</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.css$/i, // åŒ¹é… .css ç»“å°¾çš„æ–‡ä»¶</span><br><span class="line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;], // ä½¿ç”¨ä»ååˆ°å‰çš„åŠ è½½å™¨æ¥è§£æ css ä»£ç å’Œæ’å…¥åˆ° DOM</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ä¼˜åŒ–-æå–-css-ä»£ç "><a href="#ä¼˜åŒ–-æå–-css-ä»£ç " class="headerlink" title="ä¼˜åŒ–-æå– css ä»£ç "></a>ä¼˜åŒ–-æå– css ä»£ç </h3><p>éœ€æ±‚ï¼šè®© webpack æŠŠ css ä»£ç å†…å®¹å­—ç¬¦ä¸²å•ç‹¬æå–åˆ° dist ä¸‹çš„ css æ–‡ä»¶ä¸­</p>
<p>éœ€è¦ï¼šmini-css-extract-plugin æ’ä»¶æ¥å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>
<p>Webpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.css$/i,</span><br><span class="line">        // use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;]</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    // ...</span><br><span class="line">    new MiniCssExtractPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="ä¼˜åŒ–å‹ç¼©è¿‡ç¨‹"><a href="#ä¼˜åŒ–å‹ç¼©è¿‡ç¨‹" class="headerlink" title="ä¼˜åŒ–å‹ç¼©è¿‡ç¨‹"></a>ä¼˜åŒ–å‹ç¼©è¿‡ç¨‹</h3><p>éœ€æ±‚ï¼šæŠŠæå‡ºçš„ css æ–‡ä»¶å†…æ ·å¼ä»£ç å‹ç¼©</p>
<p>éœ€è¦ï¼šcss-minimizer-webpack-plugin æ’ä»¶æ¥å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i css-minimizer-webpack-plugin --save-dev </span><br></pre></td></tr></table></figure>
<p>Webpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line">const CssMinimizerPlugin = require(&quot;css-minimizer-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  // ä¼˜åŒ–</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    // æœ€å°åŒ–</span><br><span class="line">    minimizer: [</span><br><span class="line">      // åœ¨ webpack@5 ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `...` è¯­æ³•æ¥æ‰©å±•ç°æœ‰çš„ minimizerï¼ˆå³ </span><br><span class="line">      // `terser-webpack-plugin`ï¼‰ï¼Œå°†ä¸‹ä¸€è¡Œå–æ¶ˆæ³¨é‡Šï¼ˆä¿è¯ JS ä»£ç è¿˜èƒ½è¢«å‹ç¼©å¤„ç†ï¼‰</span><br><span class="line">      `...`,</span><br><span class="line">      new CssMinimizerPlugin(),</span><br><span class="line">    ],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-æ‰“åŒ…-less-ä»£ç "><a href="#Webpack-æ‰“åŒ…-less-ä»£ç " class="headerlink" title="Webpack-æ‰“åŒ… less ä»£ç "></a>Webpack-æ‰“åŒ… less ä»£ç </h3><p>è®© Webpack æ‹¥æœ‰æ‰“åŒ… less ä»£ç åŠŸèƒ½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i less less-loader --save-dev</span><br></pre></td></tr></table></figure>
<p>Webpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      // ...</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.less$/i,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;, &quot;less-loader&quot;]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-æ‰“åŒ…å›¾ç‰‡"><a href="#Webpack-æ‰“åŒ…å›¾ç‰‡" class="headerlink" title="Webpack-æ‰“åŒ…å›¾ç‰‡"></a>Webpack-æ‰“åŒ…å›¾ç‰‡</h3><p>èµ„æºæ¨¡å—ï¼šWebpack å†…ç½®äº†èµ„æºæ¨¡å—çš„æ‰“åŒ…ï¼Œæ— éœ€ä¸‹è½½é¢å¤– loader</p>
<p>æ­¥éª¤ï¼š</p>
<p>1.é…ç½® webpack.config.js è®© Webpack æ‹¥æœ‰æ‰“åŒ…å›¾ç‰‡åŠŸèƒ½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      // ...</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(png|jpg|jpeg|gif)$/i,</span><br><span class="line">        type: &#x27;asset&#x27;,</span><br><span class="line">        generator: &#123;</span><br><span class="line">          filename: &#x27;assets/[hash][ext][query]&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>å ä½ç¬¦ ã€hashã€‘å¯¹æ¨¡å—å†…å®¹åšç®—æ³•è®¡ç®—ï¼Œå¾—åˆ°æ˜ å°„çš„æ•°å­—å­—æ¯ç»„åˆçš„å­—ç¬¦ä¸²

å ä½ç¬¦ ã€extã€‘ä½¿ç”¨å½“å‰æ¨¡å—åŸæœ¬çš„å ä½ç¬¦ï¼Œä¾‹å¦‚ï¼š.png / .jpg ç­‰å­—ç¬¦ä¸²

å ä½ç¬¦ ã€queryã€‘ä¿ç•™å¼•å…¥æ–‡ä»¶æ—¶ä»£ç ä¸­æŸ¥è¯¢å‚æ•°ï¼ˆåªæœ‰ URL ä¸‹ç”Ÿæ•ˆï¼‰
</code></pre>
<p>2.æ³¨æ„ï¼šåˆ¤æ–­ä¸´ç•Œå€¼é»˜è®¤ä¸º 8KB</p>
<pre><code>å¤§äº 8KB æ–‡ä»¶ï¼šå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URL åœ°å€

å°äº 8KB æ–‡ä»¶ï¼šå¯¼å‡ºä¸€ä¸ª data URIï¼ˆbase64å­—ç¬¦ä¸²ï¼‰
</code></pre>
<h3 id="Webpack-æ‰“åŒ…æ¨¡å¼"><a href="#Webpack-æ‰“åŒ…æ¨¡å¼" class="headerlink" title="Webpack æ‰“åŒ…æ¨¡å¼"></a>Webpack æ‰“åŒ…æ¨¡å¼</h3><p>æ–¹å¼1ï¼šWebpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  mode: &#x27;production&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹å¼2ï¼špackage.json:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;build&quot;: &quot;webpack --mode=production&quot;,</span><br><span class="line">  &quot;dev&quot;: &quot;webpack serve --mode=development&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-æ‰“åŒ…æ¨¡å¼çš„åº”ç”¨"><a href="#Webpack-æ‰“åŒ…æ¨¡å¼çš„åº”ç”¨" class="headerlink" title="Webpack æ‰“åŒ…æ¨¡å¼çš„åº”ç”¨"></a>Webpack æ‰“åŒ…æ¨¡å¼çš„åº”ç”¨</h3><p>å€ŸåŠ© cross-env ï¼ˆè·¨å¹³å°é€šç”¨ï¼‰åŒ…å‘½ä»¤ï¼Œè®¾ç½®å‚æ•°åŒºåˆ†ç¯å¢ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i cross-env --save-dev</span><br></pre></td></tr></table></figure>
<p>Webpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.css$/i,</span><br><span class="line">        // use: [&#x27;style-loader&#x27;, &quot;css-loader&quot;],</span><br><span class="line">        use: [process.env.NODE_ENV === &#x27;development&#x27; ? &#x27;style-loader&#x27; : MiniCssExtractPlugin.loader, &quot;css-loader&quot;]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.less$/i,</span><br><span class="line">        use: [</span><br><span class="line">          // compiles Less to CSS</span><br><span class="line">          process.env.NODE_ENV === &#x27;development&#x27; ? &#x27;style-loader&#x27; : MiniCssExtractPlugin.loader,</span><br><span class="line">          &#x27;css-loader&#x27;,</span><br><span class="line">          &#x27;less-loader&#x27;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-å‰ç«¯æ³¨å…¥ç¯å¢ƒå˜é‡"><a href="#Webpack-å‰ç«¯æ³¨å…¥ç¯å¢ƒå˜é‡" class="headerlink" title="Webpack å‰ç«¯æ³¨å…¥ç¯å¢ƒå˜é‡"></a>Webpack å‰ç«¯æ³¨å…¥ç¯å¢ƒå˜é‡</h3><p>cross-env è®¾ç½®çš„åªåœ¨ Node.js ç¯å¢ƒç”Ÿæ•ˆï¼Œå‰ç«¯ä»£ç æ— æ³•è®¿é—® process.env.NODE_ENV</p>
<p>è§£å†³ï¼šä½¿ç”¨ Webpack å†…ç½®çš„ DefinePlugin æ’ä»¶<br>Webpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line">const webpack = require(&#x27;webpack&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">    // ...</span><br><span class="line">    new webpack.DefinePlugin(&#123;</span><br><span class="line">      // key æ˜¯æ³¨å…¥åˆ°æ‰“åŒ…åçš„å‰ç«¯ JS ä»£ç ä¸­ä½œä¸ºå…¨å±€å˜é‡</span><br><span class="line">      // value æ˜¯å˜é‡å¯¹åº”çš„å€¼ï¼ˆåœ¨ corss-env æ³¨å…¥åœ¨ node.js ä¸­çš„ç¯å¢ƒå˜é‡å­—ç¬¦ä¸²ï¼‰</span><br><span class="line">      &#x27;process.env.NODE_ENV&#x27;: JSON.stringify(process.env.NODE_ENV)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-å¼€å‘ç¯å¢ƒè°ƒé”™-source-map"><a href="#Webpack-å¼€å‘ç¯å¢ƒè°ƒé”™-source-map" class="headerlink" title="Webpack å¼€å‘ç¯å¢ƒè°ƒé”™ source map"></a>Webpack å¼€å‘ç¯å¢ƒè°ƒé”™ source map</h3><p>source map å¯ä»¥å‡†ç¡®è¿½è¸ª error å’Œ warning åœ¨åŸå§‹ä»£ç çš„ä½ç½®,é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</p>
<p>Webpack.config.js:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  devtool: &#x27;inline-source-map&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Webpack-è®¾ç½®è§£æåˆ«åè·¯å¾„"><a href="#Webpack-è®¾ç½®è§£æåˆ«åè·¯å¾„" class="headerlink" title="Webpack è®¾ç½®è§£æåˆ«åè·¯å¾„"></a>Webpack è®¾ç½®è§£æåˆ«åè·¯å¾„</h3><p>åœ¨ webpack.config.js ä¸­è®¾ç½®:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line"></span><br><span class="line">const config = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      &#x27;@&#x27;: path.resolve(__dirname, &#x27;src&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€˜@â€™ ç¬¦å·ä»£è¡¨webpack é…ç½®ä¸­çš„åˆ«åè·¯å¾„æ˜¯ä»€ä¹ˆï¼Œå°±ä¼šåœ¨æ‰“åŒ…æ—¶æ›¿æ¢æˆå“ªä¸ªè·¯å¾„ä½¿ç”¨</p>
<h3 id="ä¼˜åŒ–-CDNä½¿ç”¨"><a href="#ä¼˜åŒ–-CDNä½¿ç”¨" class="headerlink" title="ä¼˜åŒ–-CDNä½¿ç”¨"></a>ä¼˜åŒ–-CDNä½¿ç”¨</h3><p>1.å¼€å‘æ¨¡å¼ä½¿ç”¨æœ¬åœ°ç¬¬ä¸‰æ–¹åº“ï¼Œç”Ÿäº§æ¨¡å¼ä¸‹ä½¿ç”¨ CDN åŠ è½½å¼•å…¥</p>
<p>åœ¨ html ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹åº“çš„ CDN åœ°å€ å¹¶ç”¨æ¨¡æ¿è¯­æ³•åˆ¤æ–­:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;% if(htmlWebpackPlugin.options.useCdn)&#123; %&gt;</span><br><span class="line">    &lt;link href=&quot;https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.2.3/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<p>2.é…ç½® webpack.config.js ä¸­ externals å¤–éƒ¨æ‰©å±•é€‰é¡¹ï¼ˆé˜²æ­¢æŸäº› import çš„åŒ…è¢«æ‰“åŒ…ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ç›¸å…³é…ç½®</span><br><span class="line">if (process.env.NODE_ENV === &#x27;production&#x27;) &#123;</span><br><span class="line">  // å¤–éƒ¨æ‰©å±•ï¼ˆè®© webpack é˜²æ­¢ import çš„åŒ…è¢«æ‰“åŒ…è¿›æ¥ï¼‰</span><br><span class="line">  config.externals = &#123;</span><br><span class="line">    // keyï¼šimport from è¯­å¥åé¢çš„å­—ç¬¦ä¸²</span><br><span class="line">    // valueï¼šç•™åœ¨åŸåœ°çš„å…¨å±€å˜é‡ï¼ˆæœ€å¥½å’Œ cdn åœ¨å…¨å±€æš´éœ²çš„å˜é‡ä¸€è‡´ï¼‰</span><br><span class="line">    &#x27;bootstrap/dist/css/bootstrap.min.css&#x27;: &#x27;bootstrap&#x27;,</span><br><span class="line">    &#x27;axios&#x27;: &#x27;axios&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ...</span><br><span class="line">const config = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      // ...</span><br><span class="line">      // è‡ªå®šä¹‰å±æ€§ï¼Œåœ¨ html æ¨¡æ¿ä¸­ &lt;%=htmlWebpackPlugin.options.useCdn%&gt; è®¿é—®ä½¿ç”¨</span><br><span class="line">      useCdn: process.env.NODE_ENV === &#x27;production&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Knowledge summary</category>
      </categories>
      <tags>
        <tag>Node.js</tag>
        <tag>Webpack</tag>
      </tags>
  </entry>
</search>
